/*! jQuery Growl - v0.1.0 - 2013-07-23
* https://github.com/amazingSurge/jquery-growl
* Copyright (c) 2013 joeylin; Licensed MIT */
(function(e,t,n,s){var i=n.growl=function(e,t){this.element=e,this.$element=n(e),this.options=n.extend({},i.defaults,t),this.namespace=this.options.namespace,this.enable=!0,this.count=0,this.cache=[],this.template=this.options.template,this.parse=n.isFunction(this.options.parse)?this.options.parse:null,this.init()};i.prototype={constructor:i,init:function(){var e={position:"fixed"};n.extend(e,this.options.position),this.$element.addClass(this.namespace+"-wrap"),this.$element.css(e),this.$element.appendTo(n("body"))},add:function(e,t){var s,i,o=this;if(this.enabled!==!1){if(s=this.parse?this.parse(e,this.template):n(e),this.count>=this.options.count)return this.cache.push(e),!1;t&&s.addClass(this.namespace+"-"+t),s.find("."+this.namespace+"-close").on("click",function(){o.remove(s)}),this.options.autoClose===!0&&(i=setTimeout(function(){o.remove(s)},this.options.delay),s.on("mouseenter",function(){clearTimeout(i)}),s.on("mouseleave",function(){i=setTimeout(function(){o.remove(s)},o.options.delay)})),this.count++,this.options.append===!0?s.css({display:"none"}).appendTo(this.$element):s.css({display:"none"}).prependTo(this.$element),this.effects[this.options.effect].open.call(this,s)}},remove:function(e){function t(t){return i.effects[i.options.effect].close.call(i,e,t),t}var s=n.Deferred(),i=this;i.count--,n.when(t(s)).done(function(){if(0>i.count&&(i.count=0),e.remove(),0!==i.cache.length){var t=i.cache.shift();i.add(t)}})},enable:function(){return this.enabled=!0,this.$element.addClass(this.namespace+"enabled"),this},disable:function(){return this.enabled=!1,this.$element.removeClass(this.namespace+"enabled"),this}},i.prototype.effects={insertIn:{open:function(e){e.css({position:"relative",top:0,left:"-100%",display:"block"}),console.log(this),e.animate({left:0},{duration:this.options.duration,complete:function(){}})},close:function(e,t){e.css({display:"none"}),t.resolve()}},fade:{open:function(e){this.$element.children().length>0&&this.$element.addClass(this.namespace+"-slide"),e.css({opacity:0,display:"block"}),console.log(this),e.animate({opacity:1},{duration:this.options.duration,complete:function(){}})},close:function(e,t){var n=this;e.animate({opacity:0},{duration:this.options.duration,complete:function(){e.css({display:"none"}),console.log("close"),0===n.$element.children().length&&n.$element.removeClass(n.namespace+"-slide"),t.resolve()}})}}},i.defaults={namespace:"growl",skin:"simple",effect:"insertIn",count:5,autoClose:!1,delay:3e3,duration:600,append:!1,position:{bottom:0,left:50},parse:function(e,t){var s=n(t);return s.find(".msgBox-icon img").attr("src",e.src),s.find(".msgBox-content").text(e.content),s},template:'<div class="msgBox"><a href="#" class="msgBox-icon"><img src="" /></a><div class="msgBox-content"></div><span class="growl-close">close</span></div>'},n.fn.growl=function(e){if("string"==typeof e){var t=e,o=arguments.length>1?Array.prototype.slice.call(arguments,1):s;return this.each(function(){var e=n.data(this,"growl");"function"==typeof e[t]&&e[t].apply(e,o)})}var a=e||{};return a.$group=this,this.each(function(){n.data(this,"growl")||n.data(this,"growl",new i(this,a))})}})(window,document,jQuery);